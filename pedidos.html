<!DOCTYPE html>
<html class="wide wow-animation" lang="en">

<head>
  <title>Meus Pedidos - Dion</title>
  <meta name="format-detection" content="telephone=no">
  <meta name="viewport"
    content="width=device-width height=device-height initial-scale=1.0 maximum-scale=1.0 user-scalable=0">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta charset="utf-8">
  <link rel="icon" href="images/dion definitivo branco.png" type="images/dion definitivo branco.png">
  <link rel="stylesheet" type="text/css"
    href="//fonts.googleapis.com/css?family=Work+Sans:300,400,500,700,800%7CPoppins:300,400,700">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <link rel="stylesheet" href="css/pedidos.css">
</head>

<body>
  <!-- Top Panel -->
  <div class="top-panel">
    <a href="index.html" class="back-btn">
      <i class="fas fa-arrow-left"></i>
      Voltar
    </a>
    
    <div class="top-panel-logo">
      <a href="index.html">
        <img src="images/dion definitivo branco.png" alt="Dion Logo">
      </a>
    </div>
    
    <div style="width: 100px;"></div> <!-- Spacer for centering -->
  </div>

  <!-- Main Container -->
  <div class="container">
    <!-- Page Header -->
    <div class="page-header">
      <h1 class="page-title">Meus Pedidos</h1>
      <p class="page-subtitle">Acompanhe todos os seus pedidos e entregas</p>
      
      <!-- Filter Buttons -->
      <div class="orders-filter">
        <button class="filter-btn active" data-filter="all">Todos</button>
        <button class="filter-btn" data-filter="pending">Pendente</button>
        <button class="filter-btn" data-filter="processing">Processando</button>
        <button class="filter-btn" data-filter="shipped">Enviado</button>
        <button class="filter-btn" data-filter="delivered">Entregue</button>
        <button class="filter-btn" data-filter="cancelled">Cancelado</button>
      </div>
    </div>

    <!-- Orders Grid -->
    <div class="orders-grid" id="ordersGrid">
      <!-- Order 1 -->
      <div class="order-card" data-status="delivered">
        <div class="order-header">
          <div class="order-info">
            <h3>Pedido #DIO-2024-001</h3>
            <p class="order-date">Realizado em 15 de Maio, 2024</p>
          </div>
          <div class="order-status status-delivered">Entregue</div>
        </div>

        <div class="order-items">
          <div class="order-item">
            <img src="images/dion camisa brasil.png" alt="Camisa Dion Brasil" class="item-image">
            <div class="item-details">
              <div class="item-name">Camisa Dion Brasil</div>
              <div class="item-specs">Tamanho: M | Cor: Verde/Amarelo | Qtd: 1</div>
            </div>
            <div class="item-price">R$ 199,00</div>
          </div>
          <div class="order-item">
            <img src="images/shapes.png" alt="Shape Maple" class="item-image">
            <div class="item-details">
              <div class="item-name">Shape Maple Personalizado 8.25ml</div>
              <div class="item-specs">Tamanho: 8.25" | Design: Custom | Qtd: 1</div>
            </div>
            <div class="item-price">R$ 450,00</div>
          </div>
        </div>

        <div class="order-summary">
          <div class="summary-row">
            <span>Subtotal:</span>
            <span>R$ 649,00</span>
          </div>
          <div class="summary-row">
            <span>Frete:</span>
            <span>R$ 25,00</span>
          </div>
          <div class="summary-row">
            <span>Desconto:</span>
            <span>-R$ 15,00</span>
          </div>
          <div class="summary-row">
            <span>Total:</span>
            <span>R$ 659,00</span>
          </div>
        </div>

        <div class="tracking-info">
          <strong>Status da Entrega:</strong>
          <div class="tracking-steps">
            <div class="tracking-step">
              <div class="step-circle step-active">
                <i class="fas fa-check"></i>
              </div>
              <div class="step-label">Confirmado</div>
            </div>
            <div class="tracking-step">
              <div class="step-circle step-active">
                <i class="fas fa-box"></i>
              </div>
              <div class="step-label">Preparando</div>
            </div>
            <div class="tracking-step">
              <div class="step-circle step-active">
                <i class="fas fa-truck"></i>
              </div>
              <div class="step-label">Enviado</div>
            </div>
            <div class="tracking-step">
              <div class="step-circle step-active">
                <i class="fas fa-home"></i>
              </div>
              <div class="step-label">Entregue</div>
            </div>
          </div>
        </div>

        <div class="order-actions">
          <button class="action-btn btn-primary" onclick="viewOrderDetails('DIO-2024-001')">
            <i class="fas fa-eye"></i>
            Ver Detalhes
          </button>
          <button class="action-btn btn-secondary" onclick="reorderItems('DIO-2024-001')">
            <i class="fas fa-redo"></i>
            Comprar Novamente
          </button>
          <button class="action-btn btn-secondary" onclick="downloadInvoice('DIO-2024-001')">
            <i class="fas fa-download"></i>
            Nota Fiscal
          </button>
        </div>
      </div>

      <!-- Order 2 -->
      <div class="order-card" data-status="shipped">
        <div class="order-header">
          <div class="order-info">
            <h3>Pedido #DIO-2024-002</h3>
            <p class="order-date">Realizado em 28 de Maio, 2024</p>
          </div>
          <div class="order-status status-shipped">Enviado</div>
        </div>

        <div class="order-items">
          <div class="order-item">
            <img src="images/trucksbom.png" alt="Trucks Red Dragon" class="item-image">
            <div class="item-details">
              <div class="item-name">Trucks Red Dragon com Rolamento</div>
              <div class="item-specs">Tamanho: 129mm | Cor: Prata | Qtd: 1</div>
            </div>
            <div class="item-price">R$ 700,00</div>
          </div>
        </div>

        <div class="order-summary">
          <div class="summary-row">
            <span>Subtotal:</span>
            <span>R$ 700,00</span>
          </div>
          <div class="summary-row">
            <span>Frete:</span>
            <span>R$ 30,00</span>
          </div>
          <div class="summary-row">
            <span>Total:</span>
            <span>R$ 730,00</span>
          </div>
        </div>

        <div class="tracking-info">
          <strong>Código de Rastreamento:</strong> BR123456789
          <div class="tracking-steps">
            <div class="tracking-step">
              <div class="step-circle step-active">
                <i class="fas fa-check"></i>
              </div>
              <div class="step-label">Confirmado</div>
            </div>
            <div class="tracking-step">
              <div class="step-circle step-active">
                <i class="fas fa-box"></i>
              </div>
              <div class="step-label">Preparando</div>
            </div>
            <div class="tracking-step">
              <div class="step-circle step-active">
                <i class="fas fa-truck"></i>
              </div>
              <div class="step-label">Enviado</div>
            </div>
            <div class="tracking-step">
              <div class="step-circle step-inactive">
                <i class="fas fa-home"></i>
              </div>
              <div class="step-label">Entregue</div>
            </div>
          </div>
        </div>

        <div class="order-actions">
          <button class="action-btn btn-primary" onclick="trackOrder('BR123456789')">
            <i class="fas fa-truck"></i>
            Rastrear Pedido
          </button>
          <button class="action-btn btn-secondary" onclick="viewOrderDetails('DIO-2024-002')">
            <i class="fas fa-eye"></i>
            Ver Detalhes
          </button>
        </div>
      </div>

      <!-- Order 3 -->
      <div class="order-card" data-status="processing">
        <div class="order-header">
          <div class="order-info">
            <h3>Pedido #DIO-2024-003</h3>
            <p class="order-date">Realizado em 1 de Junho, 2024</p>
          </div>
          <div class="order-status status-processing">Processando</div>
        </div>

        <div class="order-items">
          <div class="order-item">
            <img src="images/camisa marrom Dion.png" alt="Camisa Dion Marrom" class="item-image">
            <div class="item-details">
              <div class="item-name">Camisa Dion Marrom</div>
              <div class="item-specs">Tamanho: G | Cor: Marrom | Qtd: 2</div>
            </div>
            <div class="item-price">R$ 260,00</div>
          </div>
        </div>

        <div class="order-summary">
          <div class="summary-row">
            <span>Subtotal:</span>
            <span>R$ 260,00</span>
          </div>
          <div class="summary-row">
            <span>Frete:</span>
            <span>R$ 20,00</span>
          </div>
          <div class="summary-row">
            <span>Total:</span>
            <span>R$ 280,00</span>
          </div>
        </div>

        <div class="tracking-info">
          <strong>Status:</strong> Pedido sendo preparado para envio
          <div class="tracking-steps">
            <div class="tracking-step">
              <div class="step-circle step-active">
                <i class="fas fa-check"></i>
              </div>
              <div class="step-label">Confirmado</div>
            </div>
            <div class="tracking-step">
              <div class="step-circle step-active">
                <i class="fas fa-box"></i>
              </div>
              <div class="step-label">Preparando</div>
            </div>
            <div class="tracking-step">
              <div class="step-circle step-inactive">
                <i class="fas fa-truck"></i>
              </div>
              <div class="step-label">Enviado</div>
            </div>
            <div class="tracking-step">
              <div class="step-circle step-inactive">
                <i class="fas fa-home"></i>
              </div>
              <div class="step-label">Entregue</div>
            </div>
          </div>
        </div>

        <div class="order-actions">
          <button class="action-btn btn-primary" onclick="viewOrderDetails('DIO-2024-003')">
            <i class="fas fa-eye"></i>
            Ver Detalhes
          </button>
          <button class="action-btn btn-danger" onclick="cancelOrder('DIO-2024-003')">
            <i class="fas fa-times"></i>
            Cancelar Pedido
          </button>
        </div>
      </div>
    </div>

    <!-- Empty State (hidden by default) -->
    <div class="empty-state" id="emptyState" style="display: none;">
      <div class="empty-icon">
        <i class="fas fa-shopping-bag"></i>
      </div>
      <h3 class="empty-title">Nenhum pedido encontrado</h3>
      <p class="empty-text">Você ainda não fez nenhum pedido ou não há pedidos com o filtro selecionado.</p>
      <a href="produtos.html" class="action-btn btn-primary">
        <i class="fas fa-shopping-cart"></i>
        Fazer Primeiro Pedido
      </a>
    </div>
  </div>

  <!-- Modal for Order Details -->
  <div id="orderModal" class="modal">
    <div class="modal-content">
      <span class="close">&times;</span>
      <h2>Detalhes do Pedido</h2>
      <div id="modalContent">
        <!-- Content will be loaded dynamically -->
      </div>
    </div>
  </div>

  <script>
    
    // Filter functionality
    const filterButtons = document.querySelectorAll('.filter-btn');
    const orderCards = document.querySelectorAll('.order-card');
    const emptyState = document.getElementById('emptyState');
    const ordersGrid = document.getElementById('ordersGrid');

    filterButtons.forEach(button => {
      button.addEventListener('click', () => {
        // Remove active class from all buttons
        filterButtons.forEach(btn => btn.classList.remove('active'));
        // Add active class to clicked button
        button.classList.add('active');

        const filter = button.getAttribute('data-filter');
        let visibleCount = 0;

        orderCards.forEach(card => {
          const cardStatus = card.getAttribute('data-status');
          if (filter === 'all' || cardStatus === filter) {
            card.style.display = 'block';
            visibleCount++;
          } else {
            card.style.display = 'none';
          }
        });

        // Show/hide empty state
        if (visibleCount === 0) {
          emptyState.style.display = 'block';
          ordersGrid.style.display = 'none';
        } else {
          emptyState.style.display = 'none';
          ordersGrid.style.display = 'grid';
        }
      });
    });

    // Modal functionality
    const modal = document.getElementById('orderModal');
    const modalContent = document.getElementById('modalContent');
    const closeBtn = document.querySelector('.close');

    closeBtn.addEventListener('click', () => {
      modal.style.display = 'none';
    });

    window.addEventListener('click', (event) => {
      if (event.target === modal) {
        modal.style.display = 'none';
      }
    });

    // Order action functions
    function viewOrderDetails(orderId) {
      modalContent.innerHTML = `
        <h3>Pedido ${orderId}</h3>
        <p><strong>Status:</strong> Processando</p>
        <p><strong>Data do Pedido:</strong> 1 de Junho, 2024</p>
        <p><strong>Endereço de Entrega:</strong></p>
        <p>João Silva<br>
        Rua das Flores, 123<br>
        Sarutaia, SP - 18950-000</p>
        <p><strong>Forma de Pagamento:</strong> Cartão de Crédito ****1234</p>
        <p><strong>Previsão de Entrega:</strong> 5-7 dias úteis</p>
      `;
      modal.style.display = 'block';
    }

    function trackOrder(trackingCode) {
      alert(`Rastreando pedido com código: ${trackingCode}\n\nRedirecionando para os Correios...`);
      // window.open(`https://www2.correios.com.br/sistemas/rastreamento/`, '_blank');
    }

    function cancelOrder(orderId) {
      if (confirm(`Tem certeza que deseja cancelar o pedido ${orderId}?`)) {
        alert('Pedido cancelado com sucesso! Você receberá um e-mail de confirmação.');
        // Here you would make an API call to cancel the order
        location.reload();
      }
    }

  function reorderItems(orderId) {
      alert(`Adicionando itens do pedido ${orderId} ao carrinho...`);
      // Here you would add the items to cart and redirect
      window.location.href = 'carrinho.html';
    }

    function downloadInvoice(orderId) {
      alert(`Baixando nota fiscal do pedido ${orderId}...`);
      // Here you would generate and download the PDF invoice
      // Example: window.open(`/api/invoice/${orderId}`, '_blank');
    }

    // Auto-refresh order status every 30 seconds
    setInterval(() => {
      // Here you would make an API call to check for order updates
      console.log('Checking for order updates...');
    }, 30000);

    // Notification system for order updates
    function showNotification(message, type = 'info') {
      const notification = document.createElement('div');
      notification.className = `notification notification-${type}`;
      notification.innerHTML = `
        <i class="fas fa-info-circle"></i>
        <span>${message}</span>
        <button onclick="this.parentElement.remove()">
          <i class="fas fa-times"></i>
        </button>
      `;
      
      // Add notification styles if not already present
      if (!document.querySelector('.notification-styles')) {
        const styles = document.createElement('style');
        styles.className = 'notification-styles';
        styles.innerHTML = `
          .notification {
            position: fixed;
            top: 100px;
            right: 20px;
            background: white;
            padding: 1rem 1.5rem;
            border-radius: 10px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            display: flex;
            align-items: center;
            gap: 0.5rem;
            z-index: 3000;
            animation: slideInRight 0.3s ease;
          }
          
          .notification-success {
            border-left: 4px solid #4caf50;
          }
          
          .notification-error {
            border-left: 4px solid #f44336;
          }
          
          .notification-info {
            border-left: 4px solid #2196f3;
          }
          
          @keyframes slideInRight {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
          }
          
          .notification button {
            background: none;
            border: none;
            cursor: pointer;
            color: #999;
            margin-left: auto;
          }
        `;
        document.head.appendChild(styles);
      }
      
      document.body.appendChild(notification);
      
      // Auto-remove after 5 seconds
      setTimeout(() => {
        if (notification.parentElement) {
          notification.remove();
        }
      }, 5000);
    }

    // Initialize page
    document.addEventListener('DOMContentLoaded', () => {
      console.log('Página Meus Pedidos carregada');
      
      // Check for any order updates on page load
      checkOrderUpdates();
    });

    // Function to check order updates (would integrate with backend)
    function checkOrderUpdates() {
      // This would make an actual API call in a real application
      // For demo purposes, we'll simulate an update
      setTimeout(() => {
        const randomUpdate = Math.random();
        if (randomUpdate > 0.8) {
          showNotification('Seu pedido #DIO-2024-002 foi atualizado!', 'info');
        }
      }, 2000);
    }

    // Add keyboard navigation support
    document.addEventListener('keydown', (event) => {
      if (event.key === 'Escape' && modal.style.display === 'block') {
        modal.style.display = 'none';
      }
    });

    // Add loading states for action buttons
    function addLoadingState(button) {
      const originalText = button.innerHTML;
      button.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Carregando...';
      button.disabled = true;
      
      setTimeout(() => {
        button.innerHTML = originalText;
        button.disabled = false;
      }, 2000);
    }

    // Enhanced order actions with loading states
    const originalViewOrderDetails = viewOrderDetails;
    viewOrderDetails = function(orderId) {
      const button = event.target.closest('.action-btn');
      addLoadingState(button);
      setTimeout(() => originalViewOrderDetails(orderId), 1000);
    };

    const originalTrackOrder = trackOrder;
    trackOrder = function(trackingCode) {
      const button = event.target.closest('.action-btn');
      addLoadingState(button);
      setTimeout(() => originalTrackOrder(trackingCode), 1000);
    };
  </script>
</body>
</html>